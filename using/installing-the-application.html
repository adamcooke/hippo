<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installing the application | Hippo</title>
    <meta name="description" content="Kubernetes deployment toolkit">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/hippo/assets/css/0.styles.50f5afac.css" as="style"><link rel="preload" href="/hippo/assets/js/app.b04199ea.js" as="script"><link rel="preload" href="/hippo/assets/js/2.d83d8343.js" as="script"><link rel="preload" href="/hippo/assets/js/13.9248b3aa.js" as="script"><link rel="prefetch" href="/hippo/assets/js/10.8a96ecc0.js"><link rel="prefetch" href="/hippo/assets/js/11.da559e82.js"><link rel="prefetch" href="/hippo/assets/js/12.5440a5fd.js"><link rel="prefetch" href="/hippo/assets/js/14.b392259a.js"><link rel="prefetch" href="/hippo/assets/js/15.8a0c17a3.js"><link rel="prefetch" href="/hippo/assets/js/16.b4083c06.js"><link rel="prefetch" href="/hippo/assets/js/3.ed1d9c25.js"><link rel="prefetch" href="/hippo/assets/js/4.1551477e.js"><link rel="prefetch" href="/hippo/assets/js/5.9d20a555.js"><link rel="prefetch" href="/hippo/assets/js/6.27217335.js"><link rel="prefetch" href="/hippo/assets/js/7.0e4232b2.js"><link rel="prefetch" href="/hippo/assets/js/8.0692184c.js"><link rel="prefetch" href="/hippo/assets/js/9.422d30b4.js">
    <link rel="stylesheet" href="/hippo/assets/css/0.styles.50f5afac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hippo/" class="home-link router-link-active"><!----> <span class="site-name">Hippo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hippo/" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="https://github.com/adamcooke/hippo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://slack.adam.ac" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hippo/" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="https://github.com/adamcooke/hippo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://slack.adam.ac" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hippo/" class="sidebar-link">Welcome to Hippo 🦛</a></li><li><a href="/hippo/install.html" class="sidebar-link">Installing</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Using Hippo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hippo/using/" class="sidebar-link">Setting up</a></li><li><a href="/hippo/using/creating-a-stage.html" class="sidebar-link">Creating a stage</a></li><li><a href="/hippo/using/configuration.html" class="sidebar-link">Configuring a stage</a></li><li><a href="/hippo/using/preparing.html" class="sidebar-link">Preparing the cluster</a></li><li><a href="/hippo/using/installing-the-application.html" class="active sidebar-link">Installing the application</a></li><li><a href="/hippo/using/status.html" class="sidebar-link">Viewing application status</a></li><li><a href="/hippo/using/deploying-updates.html" class="sidebar-link">Deploying updates</a></li><li><a href="/hippo/using/console-and-commands.html" class="sidebar-link">Console and commands</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Writing manifests</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hippo/manifests/" class="sidebar-link">Application manifests</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="installing-the-application"><a href="#installing-the-application" class="header-anchor">#</a> Installing the application</h1> <p>Once prepared, the application can be installed to the cluster. If everything has gone smoothly and the application's manifest has been configured correctly, this should be a simple operation.</p> <div class="custom-block warning"><p class="custom-block-title">NOTE ABOUT INSTALL</p> <p>You should only use the <code>install</code> command the first time you install the application. To update the application in the future you should switch to using <code>deploy</code>.</p></div> <h2 id="what-happen-s-during-an-install"><a href="#what-happen-s-during-an-install" class="header-anchor">#</a> What happen's during an install?</h2> <ul><li><p>Any configuration files will be repushed to Kubernetes.</p></li> <li><p>Any <code>install</code> jobs will be executed. Hippo will wait for them to complete successfully before continuing with the installation. If they fail or time out, the installation will be stopped. These jobs usually install database schemas or generally prepare any storage requirements.</p></li> <li><p>The application deployments (or stateful/daemon sets) will be applied to Kubernetes which will then begin to automatically start pods as needed.</p></li> <li><p>Hippo will then wait for all deployments to be rolled out successfully.</p></li> <li><p>When successful, all services (and ingresses and network policies) will be applied.</p></li></ul> <h2 id="running-the-installation"><a href="#running-the-installation" class="header-anchor">#</a> Running the installation</h2> <p>Just run the <code>hippo [stage-name] install</code> command:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>hippo <span class="token punctuation">[</span>stage-name<span class="token punctuation">]</span> <span class="token function">install</span>
<span class="token comment"># Updating manifest from https://github.com/postalhq/k8s-hippo... done</span>
<span class="token comment"># Image for main exists at adamcooke/postal:docker</span>
<span class="token comment"># Applying 1 namespace object</span>
<span class="token comment"># ====&gt; namespace/postal-demo unchanged</span>
<span class="token comment"># Downloading secret encryiption key... done</span>
<span class="token comment"># Applying 1 configuration object</span>
<span class="token comment"># ====&gt; secret/postal-config unchanged</span>
<span class="token comment"># Running install jobs</span>
<span class="token comment"># Applying 1 deploy job object</span>
<span class="token comment"># ====&gt; job.batch/initialize created</span>
<span class="token comment"># All jobs completed successfully</span>
<span class="token comment"># You can review the logs for these by running the commands below</span>
<span class="token comment">#</span>
<span class="token comment">#   ✅  hippo staging kubectl -- logs job/initialize</span>
<span class="token comment">#</span>
<span class="token comment"># Using deployment ID: 7af69667d5cd</span>
<span class="token comment"># Applying 5 deployment objects</span>
<span class="token comment"># ====&gt; deployment.apps/cron created</span>
<span class="token comment"># ====&gt; deployment.apps/requeuer created</span>
<span class="token comment"># ====&gt; deployment.apps/worker created</span>
<span class="token comment"># ====&gt; deployment.apps/smtp created</span>
<span class="token comment"># ====&gt; deployment.apps/web created</span>
<span class="token comment"># Waiting for all deployments to roll out...</span>
<span class="token comment"># Waiting for 3 deployments (smtp, web, worker)</span>
<span class="token comment"># Waiting for 2 deployments (smtp, web)</span>
<span class="token comment"># Waiting for 1 deployment (web)</span>
<span class="token comment"># All 5 deployments all rolled out successfully</span>
<span class="token comment"># Applying 9 service objects</span>
<span class="token comment"># ====&gt; ingress.networking.k8s.io/postal-web created</span>
<span class="token comment"># ====&gt; service/web created</span>
<span class="token comment"># ====&gt; networkpolicy.networking.k8s.io/default-block-policy created</span>
<span class="token comment"># ====&gt; networkpolicy.networking.k8s.io/allow-namespace-traffic created</span>
<span class="token comment"># ====&gt; networkpolicy.networking.k8s.io/allow-ingress-to-web created</span>
<span class="token comment"># ====&gt; networkpolicy.networking.k8s.io/allow-ingress-to-smtp created</span>
<span class="token comment"># ====&gt; networkpolicy.networking.k8s.io/allow-prometheus-traffic created</span>
<span class="token comment"># ====&gt; networkpolicy.networking.k8s.io/allow-cert-manager-traffic created</span>
<span class="token comment"># ====&gt; service/smtp created</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>The output you receive should look similar to above however it may be different if the jobs fail or the deployments do not roll out successfully. The output in these cases will show you the commands you can run to investigate the cause for these issues further.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hippo/using/preparing.html" class="prev">
        Preparing the cluster
      </a></span> <span class="next"><a href="/hippo/using/status.html">
        Viewing application status
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hippo/assets/js/app.b04199ea.js" defer></script><script src="/hippo/assets/js/2.d83d8343.js" defer></script><script src="/hippo/assets/js/13.9248b3aa.js" defer></script>
  </body>
</html>
